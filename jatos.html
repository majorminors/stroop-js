<!DOCTYPE html>
<html>
    <head>
        <title>Stroop Control</title>
        <!-- pull in JATOS resources -->
        <script src="/assets/javascripts/jatos.js"></script>
        <!-- pull in the jsPsych libraries we need -->
        <script src="jspsych-6.1.0/jspsych.js"></script>
        <script src="jspsych-6.1.0/plugins/jspsych-call-function.js"></script>
        <script src="jspsych-6.1.0/plugins/jspsych-resize.js"></script>
        <script src="jspsych-6.1.0/plugins/jspsych-image-audio-response.js"></script>
        <script src="jspsych-6.1.0/plugins/jspsych-html-keyboard-response.js"></script>
        <!-- pull in the experiment maker function -->
        <script src="exp.js"></script>
        <!-- pull in the styling -->
        <link rel="stylesheet" href="jspsych-6.1.0/css/jspsych.css"></link>
        <style></style>
    </head>
    <body></body>
    <script>
        
        /* 
         * the experiment script in exp.js produces the variables
         * jsPsych needs to run the experiment
         * we do this so we don't have to maintain it twice for JATOS
         * (jatos.html) and non-JATOS (index.html) versions
        */

        /* initialise experiment */
        jatos.onLoad(function() {
            // need to generate PIDs from batch session data
            var PID = 1;

            jsPsych.init({
                timeline: make_experiment(PID),
                preload_images: make_experiment(PID,"images"),
                exclusions: {
                    min_width: 800,
                    min_height: 600
                },
                on_finish: function() {
                    var resultJson = jsPsych.data.get().json();
                    jatos.submitResultData(resultJson, jatos.startNextComponent);
                }
            });
        });

    </script>
</html>
